/**
 * Minified by jsDelivr using UglifyJS v3.1.10.
 * Original file: /npm/JSV@4.0.2/lib/jsv.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var exports=exports||this,require=require||function(){return exports};!function(){function t(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function e(){}function r(t){return e.prototype=t||{},new e}function n(t,e,r){var n,i={};for(n in t)t[n]!==I[n]&&(i[n]=e.call(r,t[n],n,t));return i}function i(e){var r,n=[];switch(t(e)){case"object":for(r in e)e[r]!==I[r]&&(n[n.length]=r);break;case"array":for(r=e.length-1;r>=0;--r)n[r]=r}return n}function o(){return[U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],"-",U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],"-4",U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],"-",U[3&Math.floor(16*Math.random())|8],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],"-",U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())],U[Math.floor(16*Math.random())]].join("")}function a(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function s(t){return"string"==typeof t&&-1===t.indexOf("#")&&(t+="#"),t}function h(e){if(e instanceof c)return e.getURI();switch(t(e)){case"undefined":case"null":case"boolean":case"number":case"string":return e;case"object":return n(e,h);case"array":return y(e,h);default:return e.toString()}}function f(t,e,r,n,i){Error.call(this,n),this.uri=t instanceof c?t.getURI():t,this.sourceSchema=e instanceof c?e.getURI():e,this.attribute=r,this.message=n,this.description=n,this.details=i}function u(){this.errors=[],this.validated={}}function c(t,e,r,n){e instanceof c&&("string"!=typeof n&&(n=e._fd),"string"!=typeof r&&(r=e._uri),e=e._value),"string"!=typeof r?r="urn:uuid:"+o()+"#":-1===r.indexOf(":")&&(r=s(b.resolve("urn:uuid:"+o()+"#",r))),this._env=t,this._value=e,this._uri=r,this._fd=n||this._env._options.defaultFragmentDelimiter}function l(e,n){var i,o;switch(e instanceof c&&(e=e.getValue()),t(e)){case"object":if(n){i={};for(o in e)e[o]!==I[o]&&(i[o]=l(e[o],n));return i}return r(e);case"array":if(n){for(i=new Array(e.length),o=e.length;--o>=0;)i[o]=l(e[o],n);return i}return Array.prototype.slice.call(e);default:return e}}function p(t,e,r,n){var i;return c.call(this,t,e,r),this._schema=!0===n?this:e instanceof p&&!(n instanceof p)?e._schema:n instanceof p?n:this._env.getDefaultSchema()||this._env.createEmptySchema(),"dot-delimited"===(i=this._schema.getValueOfProperty("fragmentResolution"))?this._fd=".":"slash-delimited"===i&&(this._fd="/"),this.rebuild()}function d(t){return function(){for(var e,r=this,n=[],i=r._refs&&r._refs.full;i;)if(e=r._env.findSchema(i)){if(e._value===r._value)break;if(r=e,n.push(i),i=r._refs&&r._refs.full,n.indexOf(i)>-1)break}else{if(r._env._options.enforceReferences)throw new f(r,r._schema,"{full}","Unknown schema reference",i);i=null}return t.apply(r,arguments)}}function m(e,r,n){var i,o,a=t(e),s=t(r);if("undefined"===s)return l(e,!0);if("undefined"===a||s!==a)return l(r,!0);if("object"===s){e instanceof p&&(e=e.getAttributes()),r instanceof p&&(r=r.getAttributes()).extends&&n&&r.extends instanceof p&&(r.extends=[r.extends]),i=l(e,!0);for(o in r)r[o]!==I[o]&&(i[o]=m(e[o],r[o],n));return i}return l(r,!0)}function _(){this._id=o(),this._schemas={},this._options={},this.createSchema({},!0,"urn:jsv:empty-schema#")}var y,v,g,M,b=require("./uri/uri").URI,I={},U="0123456789abcdef".split("");y=function(t,e,r){for(var n=0,i=t.length,o=new Array(i);n<i;++n)o[n]=e.call(r,t[n],n,t);return o},Array.prototype.map&&(y=function(t,e,r){return Array.prototype.map.call(t,e,r)}),v=function(t,e,r){for(var n=0,i=t.length,o=[];n<i;++n)e.call(r,t[n],n,t)&&(o[o.length]=t[n]);return o},Array.prototype.filter&&(v=function(t,e,r){return Array.prototype.filter.call(t,e,r)}),g=function(t,e){for(var r=0,n=t.length;r<n;++r)if(t[r]===e)return r;return-1},Array.prototype.indexOf&&(g=function(t,e){return Array.prototype.indexOf.call(t,e)}),(f.prototype=new Error).constructor=f,f.prototype.name="InitializationError",u.prototype.addError=function(t,e,r,n,i){this.errors.push({uri:t instanceof c?t.getURI():t,sourceSchema:e instanceof c?e.getURI():e,attribute:r,message:n,details:h(i)})},u.prototype.registerValidation=function(t,e){this.validated[t]?this.validated[t].push(e):this.validated[t]=[e]},u.prototype.isValidatedBy=function(t,e){return!!this.validated[t]&&-1!==g(this.validated[t],e)},c.prototype.getEnvironment=function(){return this._env},c.prototype.getType=function(){return t(this._value)},c.prototype.getValue=function(){return this._value},c.prototype.getURI=function(){return this._uri},c.prototype.resolveURI=function(t){return s(b.resolve(this._uri,t))},c.prototype.getPropertyNames=function(){return i(this._value)},c.prototype.getProperty=function(t){var e=this._value?this._value[t]:void 0;return e instanceof c?e:new c(this._env,e,this._uri+this._fd+a(t),this._fd)},c.prototype.getProperties=function(){var e=t(this._value),r=this;return"object"===e?n(this._value,function(t,e){return t instanceof c?t:new c(r._env,t,r._uri+r._fd+a(e),r._fd)}):"array"===e?y(this._value,function(t,e){return t instanceof c?t:new c(r._env,t,r._uri+r._fd+a(e),r._fd)}):void 0},c.prototype.getValueOfProperty=function(t){if(this._value)return this._value[t]instanceof c?this._value[t]._value:this._value[t]},c.prototype.equals=function(t){return t instanceof c?this._value===t._value:this._value===t},(p.prototype=r(c.prototype)).getSchema=function(){var t,e=this._refs&&this._refs.describedby;if(e)if(t=e&&this._env.findSchema(e))t.equals(this._schema)||(this._schema=t,this.rebuild());else if(this._env._options.enforceReferences)throw new f(this,this._schema,"{describedby}","Unknown schema reference",e);return this._schema},p.prototype.getAttribute=function(t,e){var r,n,i,o,a=this.getSchema();return!e&&this._attributes&&this._attributes.hasOwnProperty(t)?this._attributes[t]:(r=a.getProperty("properties").getProperty(t),n=r.getValueOfProperty("parser"),i=this.getProperty(t),"function"==typeof n?(o=n(i,r,e),!e&&this._attributes&&(this._attributes[t]=o),o):i.getValue())},p.prototype.getAttributes=function(){var t,e,r,n,i,o=this.getSchema();if(!this._attributes&&"object"===this.getType()){t=this.getProperties(),e=o.getProperty("properties"),this._attributes={};for(r in t)t[r]!==I[r]&&(i=(n=e&&e.getProperty(r))&&n.getValueOfProperty("parser"),this._attributes[r]="function"==typeof i?i(t[r],n):t[r].getValue())}return l(this._attributes,!1)},p.prototype.getLink=function(t,e){var r=this.getAttribute("links",[t,e]);if(r&&r.length&&r[r.length-1])return r[r.length-1]},p.prototype.validate=function(t,e,r,n,i){var o=this.getSchema(),a=o.getValueOfProperty("validator");return t instanceof c||(t=this.getEnvironment().createInstance(t)),e instanceof u||(e=new u),this._env._options.validateReferences&&this._refs&&(this._refs.describedby&&!this._env.findSchema(this._refs.describedby)&&e.addError(this,this._schema,"{describedby}","Unknown schema reference",this._refs.describedby),this._refs.full&&!this._env.findSchema(this._refs.full)&&e.addError(this,this._schema,"{full}","Unknown schema reference",this._refs.full)),"function"!=typeof a||e.isValidatedBy(t.getURI(),this.getURI())||(e.registerValidation(t.getURI(),this.getURI()),a(t,this,o,e,r,n,i)),e},function(){var e;for(e in p.prototype)p.prototype[e]!==I[e]&&"function"===t(p.prototype[e])&&(p.prototype[e]=d(p.prototype[e]))}(),p.prototype.rebuild=function(){var t=this,e=t.getSchema().getValueOfProperty("initializer");return t._refs=null,t._attributes=null,"function"==typeof e&&(t=e(t)),t._env._schemas[t._uri]=t,t.getAttributes(),t},p.prototype.setReference=function(t,e){this._refs||(this._refs={}),this._refs[t]=this.resolveURI(e)},p.prototype.getReference=function(t){return this._refs&&this._refs[t]},_.prototype.clone=function(){var t=new _;return t._schemas=r(this._schemas),t._options=r(this._options),t},_.prototype.createInstance=function(t,e){return e=s(e),t instanceof c&&(!e||t.getURI()===e)?t:new c(this,t,e)},_.prototype.createSchema=function(t,e,r){return r=s(r),!(t instanceof p)||r&&t._uri!==r||e&&!t.getSchema().equals(e)?new p(this,t,r,e):t},_.prototype.createEmptySchema=function(){return this._schemas["urn:jsv:empty-schema#"]},_.prototype.findSchema=function(t){return this._schemas[s(t)]},_.prototype.setOption=function(t,e){this._options[t]=e},_.prototype.getOption=function(t){return this._options[t]},_.prototype.setDefaultFragmentDelimiter=function(t){"string"==typeof t&&t.length>0&&(this._options.defaultFragmentDelimiter=t)},_.prototype.getDefaultFragmentDelimiter=function(){return this._options.defaultFragmentDelimiter},_.prototype.setDefaultSchemaURI=function(t){"string"==typeof t&&(this._options.defaultSchemaURI=s(t))},_.prototype.getDefaultSchema=function(){return this.findSchema(this._options.defaultSchemaURI)},_.prototype.validate=function(t,e){var r,n,i,o=new u;try{r=this.createInstance(t),o.instance=r}catch(t){o.addError(t.uri,t.sourceSchema,t.attribute,t.message,t.details)}try{n=this.createSchema(e),o.schema=n,i=n.getSchema(),o.schemaSchema=i}catch(t){o.addError(t.uri,t.sourceSchema,t.attribute,t.message,t.details)}return i&&i.validate(n,o),o.errors.length?o:n.validate(r,o)},_.prototype._checkForInvalidInstances=function(e,r){for(var n,i,o,s,h,f=[],u=[[r,this._schemas[r]]],c=0;c++<e&&u.length;)if(n=u.shift(),i=n[0],(o=n[1])instanceof p)if(this._schemas[o._uri]!==o)f.push("Instance "+i+" does not match "+o._uri);else{s=o.getAttributes();for(h in s)s[h]!==I[h]&&u.push([i+"/"+a(h),s[h]])}else if("object"===t(o)){s=o;for(h in s)s.hasOwnProperty(h)&&u.push([i+"/"+a(h),s[h]])}else if("array"===t(o))for(s=o,h=0;h<s.length;++h)u.push([i+"/"+a(h),s[h]]);return f.length?f:c},M={_environments:{},_defaultEnvironmentID:"",isJSONInstance:function(t){return t instanceof c},isJSONSchema:function(t){return t instanceof p},createEnvironment:function(t){if(t=t||this._defaultEnvironmentID,!this._environments[t])throw new Error("Unknown Environment ID");return this._environments[t].clone()},Environment:_,registerEnvironment:function(t,e){(t=t||(e||0)._id)&&!this._environments[t]&&e instanceof _&&(e._id=t,this._environments[t]=e)},setDefaultEnvironmentID:function(t){if("string"==typeof t){if(!this._environments[t])throw new Error("Unknown Environment ID");this._defaultEnvironmentID=t}},getDefaultEnvironmentID:function(){return this._defaultEnvironmentID},typeOf:t,createObject:r,mapObject:n,mapArray:y,filterArray:v,searchArray:g,toArray:function(t){return void 0!==t&&null!==t?t instanceof Array&&!t.callee?t:"number"!=typeof t.length||t.split||t.setInterval||t.call?[t]:Array.prototype.slice.call(t):[]},keys:i,pushUnique:function(t,e){return-1===g(t,e)&&t.push(e),t},popFirst:function(t,e){var r=g(t,e);return r>-1&&t.splice(r,1),t},clone:l,randomUUID:o,escapeURIComponent:a,formatURI:s,inherits:m,InitializationError:f},this.JSV=M,exports.JSV=M,require("./environments")}();
//# sourceMappingURL=/sm/dc37407664385f6bb1ea7de776d61db59b7b77ec51706e0e3efa64b2b6de8e71.map
